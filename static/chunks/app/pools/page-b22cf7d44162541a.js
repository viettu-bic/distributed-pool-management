(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[317],{34560:function(e,t,a){Promise.resolve().then(a.bind(a,47060))},47060:function(e,t,a){"use strict";a.d(t,{default:function(){return x}});var s=a(57437),l=a(28509),n=a(88202),o=a(31006),d=a(85053),r=a(2265),i=a(12606),c=a(26735),m=a(2173),u=a(55030);let p=[{id:1,pool:"Founding Community",unlockAddress:null,lockAddress:"0x4319C7dD6E0C1fa9E35D15a0a000FEB098098Fb9",lockAmount:BigInt("0"),total:(0,l.f)("1650000000"),isDeployed:!0,speedRate:null},{id:2,pool:"Core Team",unlockAddress:"0x99C68720530F5B17df91E90cA71D782D834f00a5",lockAddress:null,lockAmount:BigInt("0"),total:(0,l.f)("400000000"),isDeployed:!1,speedRate:BigInt("30")},{id:3,pool:"Strategic partner",unlockAddress:"0xfc8d7a6C347B87d734ec043364f81d911248B6c3",lockAddress:null,lockAmount:BigInt("0"),total:(0,l.f)("150000000"),isDeployed:!1,speedRate:BigInt("30")},{id:4,pool:"Private VC Deals",unlockAddress:"0xA4b75C14499a14268320Fef47CcA51ba5a03bF75",lockAddress:null,lockAmount:BigInt("0"),total:(0,l.f)("500000000"),isDeployed:!1,speedRate:BigInt("100")},{id:5,pool:"Airdrop Campaigns",unlockAddress:"0xdb4A74A4DC1053DD1a6AcdBd4ab6e729a2bDd60C",lockAddress:null,lockAmount:BigInt("0"),total:(0,l.f)("250000000"),isDeployed:!1,speedRate:BigInt("50")},{id:6,pool:"Community and Ecosystem Development",unlockAddress:"0x37a417dce0708349d3935390B69dD53027f05A2c",lockAddress:null,lockAmount:BigInt("0"),total:(0,l.f)("300000000"),isDeployed:!1,speedRate:BigInt("50")},{id:7,pool:"Operations Fund",unlockAddress:"0xCcd153216da71698849beb465141d21fbA0239A9",lockAddress:null,lockAmount:BigInt("0"),total:(0,l.f)("500000000"),isDeployed:!1,speedRate:BigInt("30")},{id:8,pool:"Liquidity and Exchange Reserves",unlockAddress:null,lockAddress:null,lockAmount:BigInt("0"),total:(0,l.f)("250000000"),isDeployed:!1,speedRate:BigInt("30")},{id:9,pool:"Foundation Reserve",unlockAddress:"0x744A5933c08D1406e4F163Bda00858B5Cf450112",lockAddress:null,lockAmount:BigInt("0"),total:(0,l.f)("1000000000"),isDeployed:!1,speedRate:BigInt("10")}],f="https://sepolia.arbiscan.io/address/";function x(){let e=BigInt(604800),[t,a]=(0,r.useState)(p),l=(0,c.useAccount)();(0,r.useEffect)(()=>{N().catch(console.error)},[]);let{data:x}=(0,m.useWalletClient)(),[y,k]=(0,r.useState)(!1),[h,g]=(0,r.useState)(null),[A,b]=(0,r.useState)(!1);async function N(){let e=await i.Lp.readContract({...i.tm,functionName:"bicRedeemImplementation"});for(let t=0;t<p.length;t++){let s=p[t];if(s.unlockAddress){let t=await i.Lp.readContract({...i.Gp,functionName:"computeProxyAddress",args:[e,(0,n.vk)(s.unlockAddress,{size:32})],account:"0xeaBcd21B75349c59a4177E10ed17FBf2955fE697"});s.lockAddress=t,await i.Lp.getCode({address:t})&&(s.isDeployed=!0)}s.isDeployed&&s.lockAddress&&(s.lockAmount=await i.Lp.readContract({...i.Tv,functionName:"balanceOf",args:[s.lockAddress]})),a([...p])}}async function w(a){let s=t.find(e=>e.id===a);if(!s){console.error("No pool found");return}if(!l.address){alert("Please connect wallet");return}if(!x){console.error("No wallet client found");return}if("0xeabcd21b75349c59a4177e10ed17fbf2955fe697"!==l.address.toLowerCase()){alert("Only setup address can create lock pool");return}if(await i.Lp.readContract({...i.Tv,functionName:"balanceOf",args:[l.address]})<s.total){alert("Insufficient BIC balance");return}let d=await i.Lp.readContract({...i.tm,functionName:"bicRedeemImplementation"}),r=(0,o.R)({abi:(0,i.O$)(s.lockAddress).abi,functionName:"initialize",args:[i.Tv.address,s.total,s.unlockAddress,"1722470400",e,s.speedRate]});await x.writeContract({...i.Gp,functionName:"deployProxyByImplementation",args:[d,r,(0,n.vk)(s.unlockAddress,{size:32})]}),await x.writeContract({...i.Tv,functionName:"transfer",args:[s.lockAddress,s.total]}),s.isDeployed=!0,await N(),k(!1)}async function j(t){console.log("start fetch detail"),k(!0),b(!0);let a={};if(a.poolId=t.id,a.name=t.pool,t.lockAddress&&t.unlockAddress){if(a.lockAddress=t.lockAddress,t.isDeployed){a.type=0,a.totalAmount=await i.Lp.readContract({...(0,i.O$)(t.lockAddress),functionName:"redeemTotalAmount"}),a.rate=await i.Lp.readContract({...(0,i.O$)(t.lockAddress),functionName:"redeemRate"}),a.startTime=await i.Lp.readContract({...(0,i.O$)(t.lockAddress),functionName:"start"}),a.endTime=await i.Lp.readContract({...(0,i.O$)(t.lockAddress),functionName:"end"}),a.beneficiary=await i.Lp.readContract({...(0,i.O$)(t.lockAddress),functionName:"beneficiary"}),a.redeemTime=await i.Lp.readContract({...(0,i.O$)(t.lockAddress),functionName:"lastAtCurrentStack"}),a.totalRedeemTime=await i.Lp.readContract({...(0,i.O$)(t.lockAddress),functionName:"maxRewardStacks"}),a.currentRedeemTime=await i.Lp.readContract({...(0,i.O$)(t.lockAddress),functionName:"currentRewardStacks"}),a.amountPerRedeem=await i.Lp.readContract({...(0,i.O$)(t.lockAddress),functionName:"amountPerDuration"});let e=await i.Lp.readContract({...(0,i.O$)(t.lockAddress),functionName:"releasable"});a.waitingAmount=e[0],a.waitingRedeemTime=e[1]}else a.type=3,a.totalAmount=t.total,a.rate=t.speedRate,a.startTime="1722470400",a.endTime=Number("1722470400")+1e4/Number(t.speedRate)*Number(e),a.beneficiary=t.unlockAddress}else t.lockAddress?(a.type=1,a.note="All amount in this pool is for Founding community only."):(a.type=2,a.swapPool1="BIC/ETH",a.swapPool2="BIC/USDT");g(a),b(!1),console.log("end fetch detail")}async function C(e){let a=t.find(t=>t.id===e);if(!a){console.error("No pool found");return}if(!l.address){alert("Please connect wallet");return}if(!x){console.error("No wallet client found");return}await x.writeContract({...(0,i.O$)(a.lockAddress),functionName:"release"}),await j(a)}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:[(0,s.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"#"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Pool"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Address"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Lock remain"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Total"})]})}),(0,s.jsx)("tbody",{children:t.map(e=>(0,s.jsxs)("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[(0,s.jsx)("td",{className:"px-6 py-4",children:e.id}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.pool}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.lockAddress?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("a",{className:"lnk-primary",target:"_blank",rel:"noopener noreferrer",href:f+e.lockAddress,children:"Locked"}),(0,s.jsx)("br",{}),e.unlockAddress&&(0,s.jsx)("a",{className:"lnk-primary",target:"_blank",rel:"noopener noreferrer",href:f+e.unlockAddress,children:"Unlocked"})]}):"N/A"}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.lockAddress?e.isDeployed?(0,d.d)(e.lockAmount):(0,s.jsx)("button",{className:"btn-primary",onClick:()=>w(e.id),children:"Create lock pool"}):"N/A"}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,d.d)(e.total)}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("button",{className:"btn-primary",onClick:()=>j(e),children:"Detail"})})]},e.pool))})]}),(0,s.jsxs)(u.Vq,{open:y,onClose:k,className:"relative z-10",children:[(0,s.jsx)(u.ZR,{transition:!0,className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity data-[closed]:opacity-0 data-[enter]:duration-300 data-[leave]:duration-200 data-[enter]:ease-out data-[leave]:ease-in"}),(0,s.jsx)("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:(0,s.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,s.jsxs)(u.EM,{transition:!0,className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all data-[closed]:translate-y-4 data-[closed]:opacity-0 data-[enter]:duration-300 data-[leave]:duration-200 data-[enter]:ease-out data-[leave]:ease-in sm:my-8 sm:w-full sm:max-w-lg data-[closed]:sm:translate-y-0 data-[closed]:sm:scale-95",children:[(0,s.jsx)("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:(0,s.jsx)("div",{className:"sm:flex sm:items-start",children:(0,s.jsxs)("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[(0,s.jsx)(u.$N,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:null==h?void 0:h.name}),A&&(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Fetching data ..."})}),(null==h?void 0:h.note)&&(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("p",{className:"text-sm text-gray-500",children:h.note})}),(null==h?void 0:h.type)==2&&(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("a",{href:"#",className:"lnk-primary",children:h.swapPool1}),(0,s.jsx)("br",{}),(0,s.jsx)("a",{href:"#",className:"lnk-primary",children:h.swapPool2})]}),((null==h?void 0:h.type)==3||(null==h?void 0:h.type)==0)&&(0,s.jsx)("div",{className:"mt-2",children:Object.keys(h).map(e=>{if("type"!=e&&"name"!=e)return(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("span",{children:[e,":"]}),(0,s.jsx)("span",{children:"startTime"===e||"endTime"===e||"redeemTime"===e?new Date(1e3*Number(h[e])).toLocaleString():"totalAmount"===e||"amountPerRedeem"===e||"waitingAmount"===e?(0,d.d)(h[e]):"rate"===e?"".concat(Number(h[e])/1e4*100,"%"):"beneficiary"===e||"lockAddress"===e?(0,s.jsx)("a",{className:"lnk-primary",target:"_blank",rel:"noopener noreferrer",href:"https://sepolia.etherscan.io/address/"+h[e],children:h[e]}):"totalRedeemTime"===e||"currentRedeemTime"===e||"waitingRedeemTime"===e?"".concat(h[e],"/").concat(h.totalRedeemTime):h[e]}),(0,s.jsx)("br",{})]},e)})})]})})}),(0,s.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[(null==h?void 0:h.type)==3&&(0,s.jsx)("button",{type:"button",onClick:()=>w(h.poolId),className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",children:"Create pool"}),(null==h?void 0:h.type)==0&&(null==h?void 0:h.waitingRedeemTime)>0&&(0,s.jsx)("button",{type:"button",onClick:()=>C(h.poolId),className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",children:"Claim redeem"}),(0,s.jsx)("button",{type:"button","data-autofocus":!0,onClick:()=>{k(!1),g(null)},className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"Cancel"})]})]})})})]})]})}}},function(e){e.O(0,[839,454,606,971,23,744],function(){return e(e.s=34560)}),_N_E=e.O()}]);